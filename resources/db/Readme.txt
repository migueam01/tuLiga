/*
 Navicat Premium Data Transfer

 Source Server         : PROD_alpallacta
 Source Server Type    : PostgreSQL
 Source Server Version : 120007 (120007)
 Source Host           : alpallacta.com:5432
 Source Catalog        : liga_cuatro_agosto
 Source Schema         : public

 Target Server Type    : PostgreSQL
 Target Server Version : 120007 (120007)
 File Encoding         : 65001

 Date: 02/06/2024 11:59:03
*/


-- ----------------------------
-- Sequence structure for campeonato_cmp_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."campeonato_cmp_id_seq";
CREATE SEQUENCE "public"."campeonato_cmp_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for equipo_eqp_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."equipo_eqp_id_seq";
CREATE SEQUENCE "public"."equipo_eqp_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for inscripcion_ins_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."inscripcion_ins_id_seq";
CREATE SEQUENCE "public"."inscripcion_ins_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for partido_prt_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."partido_prt_id_seq";
CREATE SEQUENCE "public"."partido_prt_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for persona_prs_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."persona_prs_id_seq";
CREATE SEQUENCE "public"."persona_prs_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for rol_rol_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."rol_rol_id_seq";
CREATE SEQUENCE "public"."rol_rol_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Sequence structure for usuario_usr_id_seq
-- ----------------------------
DROP SEQUENCE IF EXISTS "public"."usuario_usr_id_seq";
CREATE SEQUENCE "public"."usuario_usr_id_seq" 
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1;

-- ----------------------------
-- Table structure for campeonato
-- ----------------------------
DROP TABLE IF EXISTS "public"."campeonato";
CREATE TABLE "public"."campeonato" (
  "cmp_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "descripcion" varchar(255) COLLATE "pg_catalog"."default",
  "grupo" int4,
  "categoria" int4,
  "sub" int4,
  "edicion" varchar(255) COLLATE "pg_catalog"."default",
  "inicio" date,
  "fin" date,
  "estado" int4,
  "create_by" varchar(255) COLLATE "pg_catalog"."default",
  "create_on" date
)
;

-- ----------------------------
-- Table structure for equipo
-- ----------------------------
DROP TABLE IF EXISTS "public"."equipo";
CREATE TABLE "public"."equipo" (
  "eqp_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "nombre" varchar(255) COLLATE "pg_catalog"."default",
  "fecha_fundacion" date,
  "estado" int4,
  "create_by" varchar(64) COLLATE "pg_catalog"."default",
  "create_on" date
)
;

-- ----------------------------
-- Table structure for inscripcion
-- ----------------------------
DROP TABLE IF EXISTS "public"."inscripcion";
CREATE TABLE "public"."inscripcion" (
  "ins_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "eqp_id" int4 NOT NULL,
  "cmp_id" int4 NOT NULL,
  "presidente" int4,
  "vicepresidente" int4,
  "estado" int4,
  "create_on" date,
  "create_by" varchar(255) COLLATE "pg_catalog"."default"
)
;

-- ----------------------------
-- Table structure for jugador
-- ----------------------------
DROP TABLE IF EXISTS "public"."jugador";
CREATE TABLE "public"."jugador" (
  "jgd_id" int4 NOT NULL,
  "prs_id" int4,
  "ins_id" int4,
  "eqp_id" int4,
  "estado" int4,
  "observacion" varchar(255) COLLATE "pg_catalog"."default"
)
;

-- ----------------------------
-- Table structure for partido
-- ----------------------------
DROP TABLE IF EXISTS "public"."partido";
CREATE TABLE "public"."partido" (
  "prt_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "eqp_a" int4,
  "eqp_b" int4,
  "eqp_v" int4,
  "gol_a" int4,
  "gol_b" int4,
  "puntos_a" int4,
  "puntos_b" int4,
  "fecha_hora" timestamp(6),
  "observacion" varchar(255) COLLATE "pg_catalog"."default",
  "estado" int4,
  "create_on" timestamp(6),
  "create_by" varchar(64) COLLATE "pg_catalog"."default"
)
;

-- ----------------------------
-- Table structure for persona
-- ----------------------------
DROP TABLE IF EXISTS "public"."persona";
CREATE TABLE "public"."persona" (
  "prs_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "identificacion" varchar(255) COLLATE "pg_catalog"."default",
  "primer_apellido" varchar(255) COLLATE "pg_catalog"."default",
  "segundo_apellido" varchar(255) COLLATE "pg_catalog"."default",
  "nombres" varchar(255) COLLATE "pg_catalog"."default",
  "sexo" int2,
  "fecha_nacimiento" date,
  "email" varchar(255) COLLATE "pg_catalog"."default",
  "telefono_movil" varchar(255) COLLATE "pg_catalog"."default",
  "telefono_fijo" varchar(255) COLLATE "pg_catalog"."default",
  "estado" int2,
  "create_on" timestamp(6),
  "create_by" varchar(255) COLLATE "pg_catalog"."default"
)
;

-- ----------------------------
-- Table structure for rol
-- ----------------------------
DROP TABLE IF EXISTS "public"."rol";
CREATE TABLE "public"."rol" (
  "rol_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "descripcion" varchar(255) COLLATE "pg_catalog"."default",
  "estado" int2
)
;

-- ----------------------------
-- Table structure for usuario
-- ----------------------------
DROP TABLE IF EXISTS "public"."usuario";
CREATE TABLE "public"."usuario" (
  "usr_id" int4 NOT NULL GENERATED BY DEFAULT AS IDENTITY (
INCREMENT 1
MINVALUE  1
MAXVALUE 2147483647
START 1
CACHE 1
),
  "prs_id" int4,
  "identificacion" varchar(255) COLLATE "pg_catalog"."default",
  "nick" varchar(255) COLLATE "pg_catalog"."default",
  "password" varchar(255) COLLATE "pg_catalog"."default",
  "estado" int2
)
;

-- ----------------------------
-- Table structure for usuario_rol
-- ----------------------------
DROP TABLE IF EXISTS "public"."usuario_rol";
CREATE TABLE "public"."usuario_rol" (
  "usro_id" int4 NOT NULL,
  "usr_id" int4,
  "rol_id" int4,
  "estado" varchar(255) COLLATE "pg_catalog"."default",
  "create_on" timestamp(6),
  "create_by" varchar(255) COLLATE "pg_catalog"."default"
)
;

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."campeonato_cmp_id_seq"
OWNED BY "public"."campeonato"."cmp_id";
SELECT setval('"public"."campeonato_cmp_id_seq"', 1, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."equipo_eqp_id_seq"
OWNED BY "public"."equipo"."eqp_id";
SELECT setval('"public"."equipo_eqp_id_seq"', 11, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."inscripcion_ins_id_seq"
OWNED BY "public"."inscripcion"."ins_id";
SELECT setval('"public"."inscripcion_ins_id_seq"', 14, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."partido_prt_id_seq"
OWNED BY "public"."partido"."prt_id";
SELECT setval('"public"."partido_prt_id_seq"', 3, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."persona_prs_id_seq"
OWNED BY "public"."persona"."prs_id";
SELECT setval('"public"."persona_prs_id_seq"', 17, true);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."rol_rol_id_seq"
OWNED BY "public"."rol"."rol_id";
SELECT setval('"public"."rol_rol_id_seq"', 1, false);

-- ----------------------------
-- Alter sequences owned by
-- ----------------------------
ALTER SEQUENCE "public"."usuario_usr_id_seq"
OWNED BY "public"."usuario"."usr_id";
SELECT setval('"public"."usuario_usr_id_seq"', 1, false);

-- ----------------------------
-- Primary Key structure for table campeonato
-- ----------------------------
ALTER TABLE "public"."campeonato" ADD CONSTRAINT "pk_campeonato" PRIMARY KEY ("cmp_id");

-- ----------------------------
-- Primary Key structure for table equipo
-- ----------------------------
ALTER TABLE "public"."equipo" ADD CONSTRAINT "pk_equipo" PRIMARY KEY ("eqp_id");

-- ----------------------------
-- Primary Key structure for table inscripcion
-- ----------------------------
ALTER TABLE "public"."inscripcion" ADD CONSTRAINT "pk_inscripcion" PRIMARY KEY ("ins_id");

-- ----------------------------
-- Primary Key structure for table jugador
-- ----------------------------
ALTER TABLE "public"."jugador" ADD CONSTRAINT "jugador_pkey" PRIMARY KEY ("jgd_id");

-- ----------------------------
-- Primary Key structure for table partido
-- ----------------------------
ALTER TABLE "public"."partido" ADD CONSTRAINT "pk_partido" PRIMARY KEY ("prt_id");

-- ----------------------------
-- Primary Key structure for table persona
-- ----------------------------
ALTER TABLE "public"."persona" ADD CONSTRAINT "persona_pkey" PRIMARY KEY ("prs_id");

-- ----------------------------
-- Primary Key structure for table rol
-- ----------------------------
ALTER TABLE "public"."rol" ADD CONSTRAINT "rol_pkey" PRIMARY KEY ("rol_id");

-- ----------------------------
-- Primary Key structure for table usuario
-- ----------------------------
ALTER TABLE "public"."usuario" ADD CONSTRAINT "usuario_pkey" PRIMARY KEY ("usr_id");

-- ----------------------------
-- Primary Key structure for table usuario_rol
-- ----------------------------
ALTER TABLE "public"."usuario_rol" ADD CONSTRAINT "usuario_rol_pkey" PRIMARY KEY ("usro_id");

-- ----------------------------
-- Foreign Keys structure for table inscripcion
-- ----------------------------
ALTER TABLE "public"."inscripcion" ADD CONSTRAINT "fk_cmp_ins" FOREIGN KEY ("cmp_id") REFERENCES "public"."campeonato" ("cmp_id") ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE "public"."inscripcion" ADD CONSTRAINT "fk_eqp_ins" FOREIGN KEY ("eqp_id") REFERENCES "public"."equipo" ("eqp_id") ON DELETE RESTRICT ON UPDATE RESTRICT;

-- ----------------------------
-- Foreign Keys structure for table jugador
-- ----------------------------
ALTER TABLE "public"."jugador" ADD CONSTRAINT "fk_eqp_jdg" FOREIGN KEY ("eqp_id") REFERENCES "public"."equipo" ("eqp_id") ON DELETE RESTRICT ON UPDATE NO ACTION;
ALTER TABLE "public"."jugador" ADD CONSTRAINT "fk_ins_jgd" FOREIGN KEY ("ins_id") REFERENCES "public"."inscripcion" ("ins_id") ON DELETE RESTRICT ON UPDATE NO ACTION;
ALTER TABLE "public"."jugador" ADD CONSTRAINT "fk_prs_jgd" FOREIGN KEY ("prs_id") REFERENCES "public"."persona" ("prs_id") ON DELETE RESTRICT ON UPDATE NO ACTION;

-- ----------------------------
-- Foreign Keys structure for table usuario
-- ----------------------------
ALTER TABLE "public"."usuario" ADD CONSTRAINT "fk_prs_usr" FOREIGN KEY ("prs_id") REFERENCES "public"."persona" ("prs_id") ON DELETE NO ACTION ON UPDATE NO ACTION;

-- ----------------------------
-- Foreign Keys structure for table usuario_rol
-- ----------------------------
ALTER TABLE "public"."usuario_rol" ADD CONSTRAINT "fk_rol_usro" FOREIGN KEY ("rol_id") REFERENCES "public"."rol" ("rol_id") ON DELETE NO ACTION ON UPDATE NO ACTION;
ALTER TABLE "public"."usuario_rol" ADD CONSTRAINT "fk_usr_usro" FOREIGN KEY ("usr_id") REFERENCES "public"."usuario" ("usr_id") ON DELETE NO ACTION ON UPDATE NO ACTION;
